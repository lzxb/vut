{"version":3,"file":"vut-vue.js","sources":["../src/plugins/vut-vue.js"],"sourcesContent":["let _Vue\n\nconst util = {\n  error (msg) {\n    throw new Error(`[vut-vue] ${msg}`)\n  }\n}\n\nconst install = (Vue) => {\n  _Vue = Vue\n  Object.defineProperty(_Vue.prototype, '$vut', {\n    get () { return this.$root._vut }\n  })\n  _Vue.mixin({\n    beforeCreate () {\n      if (!this.$options.vut) return\n      this._vut = this.$options.vut\n    }\n  })\n}\nexport default {\n  install,\n  instance: {\n    beforeCreate () {\n      if (!_Vue) {\n        util.error(`Please install 'Vue.use(vutVue)' in Vut.use(vutVue) before`)\n      }\n      this.$vue = new _Vue({\n        data: { $$state: [] }\n      })\n    },\n    destroyed () {\n      this.$vue.$data.$$state = []\n      this.$vue.$destroy()\n      delete this.$vue\n    }\n  },\n  module: {\n    created () {\n      const data = this.$context.$vue.$data\n      data.$$state.push(this.$state)\n      const index = data.$$state.length - 1\n      Object.defineProperty(this, '$state', {\n        get () {\n          return data.$$state[index]\n        },\n        set (val) {\n          data.$$state[index] = val\n        }\n      })\n    }\n  }\n}\n"],"names":["_Vue","util","msg","Error","install","Vue","defineProperty","prototype","$root","_vut","mixin","$options","vut","error","$vue","$$state","$data","$destroy","data","$context","push","$state","index","length","val"],"mappings":";;;;;;AAAA,IAAIA,aAAJ;;AAEA,IAAMC,OAAO;OAAA,iBACJC,GADI,EACC;UACJ,IAAIC,KAAJ,gBAAuBD,GAAvB,CAAN;;CAFJ;;AAMA,IAAME,UAAU,SAAVA,OAAU,CAACC,GAAD,EAAS;SAChBA,GAAP;SACOC,cAAP,CAAsBN,KAAKO,SAA3B,EAAsC,MAAtC,EAA8C;OAAA,iBACrC;aAAS,KAAKC,KAAL,CAAWC,IAAlB;;GADX;OAGKC,KAAL,CAAW;gBAAA,0BACO;UACV,CAAC,KAAKC,QAAL,CAAcC,GAAnB,EAAwB;WACnBH,IAAL,GAAY,KAAKE,QAAL,CAAcC,GAA1B;;GAHJ;CALF;AAYA,aAAe;kBAAA;YAEH;gBAAA,0BACQ;UACV,CAACZ,IAAL,EAAW;aACJa,KAAL;;WAEGC,IAAL,GAAY,IAAId,IAAJ,CAAS;cACb,EAAEe,SAAS,EAAX;OADI,CAAZ;KALM;aAAA,uBASK;WACND,IAAL,CAAUE,KAAV,CAAgBD,OAAhB,GAA0B,EAA1B;WACKD,IAAL,CAAUG,QAAV;aACO,KAAKH,IAAZ;;GAdS;UAiBL;WAAA,qBACK;UACHI,OAAO,KAAKC,QAAL,CAAcL,IAAd,CAAmBE,KAAhC;WACKD,OAAL,CAAaK,IAAb,CAAkB,KAAKC,MAAvB;UACMC,QAAQJ,KAAKH,OAAL,CAAaQ,MAAb,GAAsB,CAApC;aACOjB,cAAP,CAAsB,IAAtB,EAA4B,QAA5B,EAAsC;WAAA,iBAC7B;iBACEY,KAAKH,OAAL,CAAaO,KAAb,CAAP;SAFkC;WAAA,eAI/BE,GAJ+B,EAI1B;eACHT,OAAL,CAAaO,KAAb,IAAsBE,GAAtB;;OALJ;;;CAtBN;;;;;;;;"}
{"version":3,"file":"vut-react.js","sources":["../../../src/plugins/vut-react.jsx"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport const connect = (Component, mapModules) => {\n  return class Connect extends React.Component {\n    static contextTypes = {\n      vut: PropTypes.object.isRequired\n    }\n    state = mapModules(this.context.vut)\n    componentWillMount () {\n      this.onChange = () => {\n        this.setState(mapModules(this.context.vut))\n      }\n      this.context.vut.$dep.addSub(this.onChange)\n    }\n    render () {\n      return <Component {...this.props} {...this.state} />\n    }\n    componentWillUnmount () {\n      this.context.vut.$dep.removeSub(this.onChange)\n    }\n  }\n}\n\nexport class Provider extends React.Component {\n  static propTypes = {\n    children: PropTypes.element.isRequired,\n    vut: PropTypes.object.isRequired\n  }\n  static childContextTypes = {\n    vut: PropTypes.object.isRequired\n  }\n  getChildContext () {\n    return {\n      vut: this.props.vut\n    }\n  }\n  render () {\n    return React.Children.only(this.props.children)\n  }\n}\n"],"names":["connect","Component","mapModules","state","context","vut","onChange","setState","$dep","addSub","props","removeSub","React","contextTypes","PropTypes","object","isRequired","Provider","Children","only","children","propTypes","element","childContextTypes"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,AAGO,IAAMA,UAAU,SAAVA,OAAU,CAACC,SAAD,EAAYC,UAAZ,EAA2B;;;;;;;;;;;;;;;;;yLAK9CC,KAJF,GAIUD,WAAW,MAAKE,OAAL,CAAaC,GAAxB,CAJV;;;;;2CAKwB;;;aACfC,QAAL,GAAgB,YAAM;iBACfC,QAAL,CAAcL,WAAW,OAAKE,OAAL,CAAaC,GAAxB,CAAd;SADF;aAGKD,OAAL,CAAaC,GAAb,CAAiBG,IAAjB,CAAsBC,MAAtB,CAA6B,KAAKH,QAAlC;;;;+BAEQ;eACD,oBAAC,SAAD,eAAe,KAAKI,KAApB,EAA+B,KAAKP,KAApC,EAAP;;;;6CAEsB;aACjBC,OAAL,CAAaC,GAAb,CAAiBG,IAAjB,CAAsBG,SAAtB,CAAgC,KAAKL,QAArC;;;;IAfyBM,MAAMX,SAAnC,UACSY,YADT,GACwB;SACfC,UAAUC,MAAV,CAAiBC;GAF1B;CADK;;AAqBP,IAAaC,QAAb;;;;;;;;;;sCAQqB;aACV;aACA,KAAKP,KAAL,CAAWL;OADlB;;;;6BAIQ;aACDO,MAAMM,QAAN,CAAeC,IAAf,CAAoB,KAAKT,KAAL,CAAWU,QAA/B,CAAP;;;;EAd0BR,MAAMX,SAApC,WACSoB,SADT,GACqB;YACPP,UAAUQ,OAAV,CAAkBN,UADX;OAEZF,UAAUC,MAAV,CAAiBC;CAH1B,UAKSO,iBALT,GAK6B;OACpBT,UAAUC,MAAV,CAAiBC;CAN1B;;;;;;;;;;;;;"}
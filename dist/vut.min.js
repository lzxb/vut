!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Vut=e()}(this,function(){"use strict";var t={isObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},error:function(t){throw new Error("[Vut] "+t)},has:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},pathCompression:function(t,e){Object.keys(e).forEach(function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t}})})},getModule:function(e,n,o){if("string"==typeof n)return o(e.modules[n]);if(t.isObject(n)){var r={};return Object.keys(n).forEach(function(t){r[t]=o(e.modules[n[t]])}),r}},callModuleHook:function(e,n,o){r.options.plugins.filter(function(e){return t.isObject(e.module)}).map(function(t){return t.module}).forEach(function(e){t.has(e,o)&&e[o].call(n)})},callInstanceHook:function(e,n){r.options.plugins.filter(function(e){return t.isObject(e.instance)}).map(function(t){return t.instance}).forEach(function(o){t.has(o,n)&&o[n].call(e)})}},e=(function(){function t(t){this.value=t}function e(e){function n(r,i){try{var u=e[r](i),c=u.value;c instanceof t?Promise.resolve(c.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(u.done?"return":"normal",u.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":r.resolve({value:e,done:!0});break;case"throw":r.reject(e);break;default:r.resolve({value:e,done:!1})}(r=r.next)?n(r.key,r.arg):i=null}var r,i;this._invoke=function(t,e){return new Promise(function(o,u){var c={key:t,arg:e,resolve:o,reject:u,next:null};i?i=i.next=c:(r=i=c,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),n=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),o=!1,r=function(){function r(n){e(this,r),o=!0,this.modules={},this.plugins=[],t.callInstanceHook(this,"beforeCreate"),t.callInstanceHook(this,"created")}return n(r,[{key:"addModules",value:function(e,n){var o=this;"string"!=typeof e&&t.error(e+" 'path' not is string type"),t.isObject(n)||t.error(e+" 'options' not is object type"),t.isObject(n.modules)&&Object.keys(n.modules).forEach(function(t){o.addModules(e+"/"+t,n.modules[t])}),t.has(this.modules,e)&&t.error("'"+e+"' already is in module"),"function"!=typeof n.data&&t.error("'"+e+"' not is function type");var r=Object.create(null);return r.$options=n,r.$context=this,t.callModuleHook(this,r,"beforeCreate"),r.$actions={},Object.keys(r.$options).forEach(function(t){"function"==typeof r.$options[t]&&(r.$actions[t]=function(){return r.$options[t].apply(r,arguments)})}),r.$state=r.$actions.data(),t.isObject(r.$state)||t.error("'vut.getAction("+e+").data()' return value not is object type"),t.pathCompression(r,r.$actions),t.pathCompression(r,r.$state),this.modules[e]=r,t.callModuleHook(this,r,"created"),this}},{key:"getModule",value:function(e){return t.getModule(this,e,function(t){return t})}},{key:"getState",value:function(e){return t.getModule(this,e,function(t){return t.$state})}},{key:"getActions",value:function(e){return t.getModule(this,e,function(t){return t.$actions})}},{key:"destroy",value:function(){var e=this;t.callInstanceHook(this,"beforeDestroy"),Object.keys(this.modules).forEach(function(n){var o=e.modules[n];t.callModuleHook(e,o,"beforeDestroy"),t.callModuleHook(e,o,"destroyed")}),t.callInstanceHook(this,"destroyed")}}]),r}();return Object.assign(r,{options:{plugins:[]},use:function(e){return t.isObject(e)||t.error("plugin not is object type"),o?t.error("'Vut.use(plugin)' must in 'new Vut()' before"):(this.options.plugins.push(e),this)},util:t}),r});
//# sourceMappingURL=vut.min.js.map

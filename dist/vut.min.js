!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Vut=e()}(this,function(){"use strict";var t={isObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},error:function(t){throw new Error("[vut] "+t)},has:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},pathCompression:function(t,e){Object.keys(e).forEach(function(o){Object.defineProperty(t,o,{get:function(){return e[o]},set:function(t){e[o]=t}})})},getModule:function(e,o,n){if("string"==typeof o)return t.has(e.modules,o)||t.error("Module '"+o+"' does not exist"),n(e.modules[o]);if(t.isObject(o)){var r={};return Object.keys(o).forEach(function(i){t.has(e.modules,i)||t.error("Module '"+o[i]+"' does not exist"),r[i]=n(e.modules[o[i]])}),r}t.error("The parameter is illegal. Please use 'vut.getModule(path: string)' or 'vut.getModule({ [path: string]: string })'")},callModuleHook:function(e,o,n){r.options.plugins.filter(function(e){return t.isObject(e.module)}).map(function(t){return t.module}).forEach(function(e){t.has(e,n)&&e[n].call(o)})},callInstanceHook:function(e,o){r.options.plugins.filter(function(e){return t.isObject(e.instance)}).map(function(t){return t.instance}).forEach(function(n){t.has(n,o)&&n[o].call(e)})}},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),n=!1,r=function(){function r(o){e(this,r),this.modules={},this.plugins=[],t.callInstanceHook(this,"beforeCreate"),t.callInstanceHook(this,"created"),n=!0}return o(r,[{key:"addModules",value:function(e,o){var n=this;"string"!=typeof e&&t.error("'path="+e+"' not is string type"),e||t.error("'path' not is null string"),t.isObject(o)||t.error(e+" 'options' not is object type"),t.isObject(o.modules)&&Object.keys(o.modules).forEach(function(t){n.addModules(e+"/"+t,o.modules[t])}),t.has(this.modules,e)&&t.error("'"+e+"' already is in module"),"function"!=typeof o.data&&t.error("'"+e+"' not is function type");var r=Object.create(null);return r.$options=o,r.$context=this,t.callModuleHook(this,r,"beforeCreate"),r.$actions={},Object.keys(r.$options).forEach(function(t){"function"==typeof r.$options[t]&&(r.$actions[t]=function(){return r.$options[t].apply(r,arguments)})}),r.$state=r.$actions.data(),t.isObject(r.$state)||t.error("'vut.getAction("+e+").data()' return value not is object type"),t.pathCompression(r,r.$actions),t.pathCompression(r,r.$state),this.modules[e]=r,t.callModuleHook(this,r,"created"),this}},{key:"getModule",value:function(e){return t.getModule(this,e,function(t){return t})}},{key:"getState",value:function(e){return t.getModule(this,e,function(t){return t.$state})}},{key:"getActions",value:function(e){return t.getModule(this,e,function(t){return t.$actions})}},{key:"destroy",value:function(){var e=this;return t.callInstanceHook(this,"beforeDestroy"),Object.keys(this.modules).forEach(function(o){var n=e.modules[o];t.callModuleHook(e,n,"beforeDestroy"),t.callModuleHook(e,n,"destroyed")}),t.callInstanceHook(this,"destroyed"),this}}]),r}();return Object.assign(r,{options:{plugins:[]},use:function(e){return t.isObject(e)||t.error("plugin not is object type"),n?t.error("'Vut.use(plugin)' must in 'new Vut()' before"):(this.options.plugins.push(e),this)}}),r});
//# sourceMappingURL=vut.min.js.map
